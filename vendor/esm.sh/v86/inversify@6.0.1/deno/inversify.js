/* esm.sh - esbuild bundle(inversify@6.0.1) deno production */
var Bn=Object.defineProperty;var Pn=(e,t)=>{for(var n in t)Bn(e,n,{get:t[n],enumerable:!0})};var y={};Pn(y,{DESIGN_PARAM_TYPES:()=>ft,INJECT_TAG:()=>x,MULTI_INJECT_TAG:()=>w,NAMED_TAG:()=>_,NAME_TAG:()=>L,NON_CUSTOM_TAG_KEYS:()=>rt,OPTIONAL_TAG:()=>F,PARAM_TYPES:()=>K,POST_CONSTRUCT:()=>U,PRE_DESTROY:()=>G,TAGGED:()=>Q,TAGGED_PROP:()=>Z,UNMANAGED_TAG:()=>B});var _="named",L="name",B="unmanaged",F="optional",x="inject",w="multi_inject",Q="inversify:tagged",Z="inversify:tagged_props",K="inversify:paramtypes",ft="design:paramtypes",U="post_construct",G="pre_destroy";function Yn(){return[x,w,L,B,_,F]}var rt=Yn();var h={Request:"Request",Singleton:"Singleton",Transient:"Transient"},l={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},N={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};var Ln=0;function m(){return Ln++}var bt=function(){function e(t,n){this.id=m(),this.activated=!1,this.serviceIdentifier=t,this.scope=n,this.type=l.Invalid,this.constraint=function(r){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=t.scope===h.Singleton?this.activated:!1,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.onDeactivation=this.onDeactivation,t.cache=this.cache,t},e}();var Dt="Cannot apply @injectable decorator multiple times.",pt="Metadata key was used more than once in a parameter:",j="NULL argument",lt="Key Not Found",Nt="Ambiguous match found for serviceIdentifier:",Mt="Could not unbind serviceIdentifier:",It="No matching bindings found for serviceIdentifier:",ht="Missing required @injectable annotation in:",Ot="Missing required @inject or @multiInject annotation in:",Ct=function(e){return"@inject called with undefined this could mean that the class "+e+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},xt="Circular dependency found:";var Gt="Invalid binding type:",Bt="No snapshot available to restore.",Pt="Invalid return type in middleware. Middleware must return!",Yt="Value provided to function binding must be a function!",Lt=function(e){return"You are attempting to construct '"+e+`' in a synchronous way
 but it has asynchronous dependencies.`},Ft="The toSelf function can only be applied when a constructor is used as service identifier",dt="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",Kt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"The number of constructor arguments in the derived class "+(e[0]+" must be >= than the number of constructor arguments of its base class.")},Ut="Invalid Container constructor argument. Container options must be an object.",jt="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",kt="Invalid Container option. Auto bind injectable must be a boolean",Vt="Invalid Container option. Skip base check must be a boolean",Wt="Cannot apply @preDestroy decorator multiple times in the same class",Ht="Cannot apply @postConstruct decorator multiple times in the same class",Jt="Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)",zt=function(e,t){return"@postConstruct error in class "+e+": "+t},qt=function(e,t){return"@preDestroy error in class "+e+": "+t},X=function(e,t){return"onDeactivation() error in class "+e+": "+t},Qt=function(e,t){return"It looks like there is a circular dependency in one of the '"+e+"' bindings. Please investigate bindings with"+("service identifier '"+t+"'.")},Zt="Maximum call stack size exceeded";var vt=function(){function e(){}return e.prototype.getConstructorMetadata=function(t){var n=Reflect.getMetadata(K,t),r=Reflect.getMetadata(Q,t);return{compilerGeneratedMetadata:n,userGeneratedMetadata:r||{}}},e.prototype.getPropertiesMetadata=function(t){var n=Reflect.getMetadata(Z,t)||[];return n},e}();var $={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};function yt(e){return e instanceof RangeError||e.message===Zt}var Xt=function(e,t){try{return e()}catch(n){throw yt(n)&&(n=t()),n}};function M(e){if(typeof e=="function"){var t=e;return t.name}else{if(typeof e=="symbol")return e.toString();var t=e;return t}}function At(e,t,n){var r="",o=n(e,t);return o.length!==0&&(r=`
Registered bindings:`,o.forEach(function(i){var s="Object";i.implementationType!==null&&(s=k(i.implementationType)),r=r+`
 `+s,i.constraint.metaData&&(r=r+" - "+i.constraint.metaData)})),r}function $t(e,t){return e.parentRequest===null?!1:e.parentRequest.serviceIdentifier===t?!0:$t(e.parentRequest,t)}function Fn(e){function t(r,o){o===void 0&&(o=[]);var i=M(r.serviceIdentifier);return o.push(i),r.parentRequest!==null?t(r.parentRequest,o):o}var n=t(e);return n.reverse().join(" --> ")}function _t(e){e.childRequests.forEach(function(t){if($t(t,t.serviceIdentifier)){var n=Fn(t);throw new Error(xt+" "+n)}else _t(t)})}function tn(e,t){if(t.isTagged()||t.isNamed()){var n="",r=t.getNamedTag(),o=t.getCustomTags();return r!==null&&(n+=r.toString()+`
`),o!==null&&o.forEach(function(i){n+=i.toString()+`
`})," "+e+`
 `+e+" - "+n}else return" "+e}function k(e){if(e.name)return e.name;var t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+t}function nn(e){return e.toString().slice(7,-1)}var gt=function(){function e(t){this.id=m(),this.container=t}return e.prototype.addPlan=function(t){this.plan=t},e.prototype.setCurrentRequest=function(t){this.currentRequest=t},e}();var v=function(){function e(t,n){this.key=t,this.value=n}return e.prototype.toString=function(){return this.key===_?"named: "+String(this.value).toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+String(this.value)+" }"},e}();var en=function(){function e(t,n){this.parentContext=t,this.rootRequest=n}return e}();var mt=function(){function e(t){this._cb=t}return e.prototype.unwrap=function(){return this._cb()},e}();var rn=function(){function e(t){this.str=t}return e.prototype.startsWith=function(t){return this.str.indexOf(t)===0},e.prototype.endsWith=function(t){var n="",r=t.split("").reverse().join("");return n=this.str.split("").reverse().join(""),this.startsWith.call({str:n},r)},e.prototype.contains=function(t){return this.str.indexOf(t)!==-1},e.prototype.equals=function(t){return this.str===t},e.prototype.value=function(){return this.str},e}();var V=function(){function e(t,n,r,o){this.id=m(),this.type=t,this.serviceIdentifier=r;var i=typeof n=="symbol"?nn(n):n;this.name=new rn(i||""),this.identifier=n,this.metadata=new Array;var s=null;typeof o=="string"?s=new v(_,o):o instanceof v&&(s=o),s!==null&&this.metadata.push(s)}return e.prototype.hasTag=function(t){for(var n=0,r=this.metadata;n<r.length;n++){var o=r[n];if(o.key===t)return!0}return!1},e.prototype.isArray=function(){return this.hasTag(w)},e.prototype.matchesArray=function(t){return this.matchesTag(w)(t)},e.prototype.isNamed=function(){return this.hasTag(_)},e.prototype.isTagged=function(){return this.metadata.some(function(t){return rt.every(function(n){return t.key!==n})})},e.prototype.isOptional=function(){return this.matchesTag(F)(!0)},e.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(t){return t.key===_})[0]:null},e.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(t){return rt.every(function(n){return t.key!==n})}):null},e.prototype.matchesNamedTag=function(t){return this.matchesTag(_)(t)},e.prototype.matchesTag=function(t){var n=this;return function(r){for(var o=0,i=n.metadata;o<i.length;o++){var s=i[o];if(s.key===t&&s.value===r)return!0}return!1}},e}();var it=function(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};function on(e,t){var n=k(t);return an(e,n,t,!1)}function an(e,t,n,r){var o=e.getConstructorMetadata(n),i=o.compilerGeneratedMetadata;if(i===void 0){var s=ht+" "+t+".";throw new Error(s)}var u=o.userGeneratedMetadata,f=Object.keys(u),a=n.length===0&&f.length>0,c=f.length>n.length,p=a||c?f.length:n.length,d=Un(r,t,i,u,p),D=sn(e,n,t),C=it(it([],d,!0),D,!0);return C}function Kn(e,t,n,r,o){var i=o[e.toString()]||[],s=un(i),u=s.unmanaged!==!0,f=r[e],a=s.inject||s.multiInject;if(f=a||f,f instanceof mt&&(f=f.unwrap()),u){var c=f===Object,p=f===Function,d=f===void 0,D=c||p||d;if(!t&&D){var C=Ot+" argument "+e+" in class "+n+".";throw new Error(C)}var q=new V(N.ConstructorArgument,s.targetName,f);return q.metadata=i,q}return null}function Un(e,t,n,r,o){for(var i=[],s=0;s<o;s++){var u=s,f=Kn(u,e,t,n,r);f!==null&&i.push(f)}return i}function jn(e,t,n,r){var o=e||t;if(o===void 0){var i=ht+" for property "+String(n)+" in class "+r+".";throw new Error(i)}return o}function sn(e,t,n){for(var r=e.getPropertiesMetadata(t),o=[],i=Object.getOwnPropertySymbols(r),s=Object.keys(r),u=s.concat(i),f=0,a=u;f<a.length;f++){var c=a[f],p=r[c],d=un(p),D=d.targetName||c,C=jn(d.inject,d.multiInject,c,n),q=new V(N.ClassProperty,D,C);q.metadata=p,o.push(q)}var Rt=Object.getPrototypeOf(t.prototype).constructor;if(Rt!==Object){var Gn=sn(e,Rt,n);o=it(it([],o,!0),Gn,!0)}return o}function Tt(e,t){var n=Object.getPrototypeOf(t.prototype).constructor;if(n!==Object){var r=k(n),o=an(e,r,n,!0),i=o.map(function(f){return f.metadata.filter(function(a){return a.key===B})}),s=[].concat.apply([],i).length,u=o.length-s;return u>0?u:Tt(e,n)}else return 0}function un(e){var t={};return e.forEach(function(n){t[n.key.toString()]=n.value}),{inject:t[x],multiInject:t[w],targetName:t[L],unmanaged:t[B]}}var ot=function(){function e(t,n,r,o,i){this.id=m(),this.serviceIdentifier=t,this.parentContext=n,this.parentRequest=r,this.target=i,this.childRequests=[],this.bindings=Array.isArray(o)?o:[o],this.requestScope=r===null?new Map:null}return e.prototype.addChildRequest=function(t,n,r){var o=new e(t,this.parentContext,this,n,r);return this.childRequests.push(o),o},e}();function W(e){return e._bindingDictionary}function kn(e,t,n,r,o,i){var s=e?w:x,u=new v(s,n),f=new V(t,r,n,u);if(o!==void 0){var a=new v(o,i);f.metadata.push(a)}return f}function cn(e,t,n,r,o){var i=tt(n.container,o.serviceIdentifier),s=[];return i.length===$.NoBindingsAvailable&&n.container.options.autoBindInjectable&&typeof o.serviceIdentifier=="function"&&e.getConstructorMetadata(o.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(o.serviceIdentifier).toSelf(),i=tt(n.container,o.serviceIdentifier)),t?s=i:s=i.filter(function(u){var f=new ot(u.serviceIdentifier,n,r,u,o);return u.constraint(f)}),Vn(o.serviceIdentifier,s,o,n.container),s}function Vn(e,t,n,r){switch(t.length){case $.NoBindingsAvailable:if(n.isOptional())return t;var o=M(e),i=It;throw i+=tn(o,n),i+=At(r,o,tt),new Error(i);case $.OnlyOneBindingAvailable:return t;case $.MultipleBindingsAvailable:default:if(n.isArray())return t;var o=M(e),i=Nt+" "+o;throw i+=At(r,o,tt),new Error(i)}}function fn(e,t,n,r,o,i){var s,u;if(o===null){s=cn(e,t,r,null,i),u=new ot(n,r,null,s,i);var f=new en(r,u);r.addPlan(f)}else s=cn(e,t,r,o,i),u=o.addChildRequest(i.serviceIdentifier,s,i);s.forEach(function(a){var c=null;if(i.isArray())c=u.addChildRequest(a.serviceIdentifier,a,i);else{if(a.cache)return;c=u}if(a.type===l.Instance&&a.implementationType!==null){var p=on(e,a.implementationType);if(!r.container.options.skipBaseClassChecks){var d=Tt(e,a.implementationType);if(p.length<d){var D=Kt(k(a.implementationType));throw new Error(D)}}p.forEach(function(C){fn(e,!1,C.serviceIdentifier,r,c,C)})}})}function tt(e,t){var n=[],r=W(e);return r.hasKey(t)?n=r.get(t):e.parent!==null&&(n=tt(e.parent,t)),n}function pn(e,t,n,r,o,i,s,u){u===void 0&&(u=!1);var f=new gt(t),a=kn(n,r,o,"",i,s);try{return fn(e,u,o,f,null,a),f}catch(c){throw yt(c)&&_t(f.plan.rootRequest),c}}function ln(e,t,n,r){var o=new V(N.Variable,"",t,new v(n,r)),i=new gt(e),s=new ot(t,i,null,[],o);return s}function g(e){var t=typeof e=="object"&&e!==null||typeof e=="function";return t&&typeof e.then=="function"}function at(e){return g(e)?!0:Array.isArray(e)&&e.some(g)}var Wn=function(e,t,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function u(c){try{a(r.next(c))}catch(p){s(p)}}function f(c){try{a(r.throw(c))}catch(p){s(p)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((r=r.apply(e,t||[])).next())})},Hn=function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,o=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){n.label=a[1];break}if(a[0]===6&&n.label<i[1]){n.label=i[1],i=a;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(a);break}i[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(c){a=[6,c],o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},hn=function(e,t){return t.scope===h.Singleton&&t.activated?t.cache:t.scope===h.Request&&e.has(t.id)?e.get(t.id):null},dn=function(e,t,n){t.scope===h.Singleton&&zn(t,n),t.scope===h.Request&&Jn(e,t,n)},Jn=function(e,t,n){e.has(t.id)||e.set(t.id,n)},zn=function(e,t){e.cache=t,e.activated=!0,g(t)&&qn(e,t)},qn=function(e,t){return Wn(void 0,void 0,void 0,function(){var n,r;return Hn(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,t];case 1:return n=o.sent(),e.cache=n,[3,3];case 2:throw r=o.sent(),e.cache=null,e.activated=!1,r;case 3:return[2]}})})};var H;(function(e){e.DynamicValue="toDynamicValue",e.Factory="toFactory",e.Provider="toProvider"})(H||(H={}));var Qn=function(e){return function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach(function(o){return e.bind(o).toService(t)})}}},vn=function(e){var t=null;switch(e.type){case l.ConstantValue:case l.Function:t=e.cache;break;case l.Constructor:case l.Instance:t=e.implementationType;break;case l.DynamicValue:t=e.dynamicValue;break;case l.Provider:t=e.provider;break;case l.Factory:t=e.factory;break}if(t===null){var n=M(e.serviceIdentifier);throw new Error(Gt+" "+n)}},yn=function(e){switch(e.type){case l.Factory:return{factory:e.factory,factoryType:H.Factory};case l.Provider:return{factory:e.provider,factoryType:H.Provider};case l.DynamicValue:return{factory:e.dynamicValue,factoryType:H.DynamicValue};default:throw new Error("Unexpected factory type "+e.type)}};var J=function(){return J=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},J.apply(this,arguments)},gn=function(e,t,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function u(c){try{a(r.next(c))}catch(p){s(p)}}function f(c){try{a(r.throw(c))}catch(p){s(p)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((r=r.apply(e,t||[])).next())})},mn=function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,o=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){n.label=a[1];break}if(a[0]===6&&n.label<i[1]){n.label=i[1],i=a;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(a);break}i[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(c){a=[6,c],o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Zn=function(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};function Xn(e,t){return e.reduce(function(n,r){var o=t(r),i=r.target.type;return i===N.ConstructorArgument?n.constructorInjections.push(o):(n.propertyRequests.push(r),n.propertyInjections.push(o)),n.isAsync||(n.isAsync=at(o)),n},{constructorInjections:[],propertyInjections:[],propertyRequests:[],isAsync:!1})}function $n(e,t,n){var r;if(t.length>0){var o=Xn(t,n),i=J(J({},o),{constr:e});o.isAsync?r=te(i):r=Tn(i)}else r=new e;return r}function Tn(e){var t,n=new((t=e.constr).bind.apply(t,Zn([void 0],e.constructorInjections,!1)));return e.propertyRequests.forEach(function(r,o){var i=r.target.identifier,s=e.propertyInjections[o];n[i]=s}),n}function te(e){return gn(this,void 0,void 0,function(){var t,n;return mn(this,function(r){switch(r.label){case 0:return[4,An(e.constructorInjections)];case 1:return t=r.sent(),[4,An(e.propertyInjections)];case 2:return n=r.sent(),[2,Tn(J(J({},e),{constructorInjections:t,propertyInjections:n}))]}})})}function An(e){return gn(this,void 0,void 0,function(){var t,n,r,o;return mn(this,function(i){for(t=[],n=0,r=e;n<r.length;n++)o=r[n],Array.isArray(o)?t.push(Promise.all(o)):t.push(o);return[2,Promise.all(t)]})})}function _n(e,t){var n=ne(e,t);return g(n)?n.then(function(){return t}):t}function ne(e,t){var n,r;if(Reflect.hasMetadata(U,e)){var o=Reflect.getMetadata(U,e);try{return(r=(n=t)[o.value])===null||r===void 0?void 0:r.call(n)}catch(i){throw new Error(zt(e.name,i.message))}}}function ee(e,t){e.scope!==h.Singleton&&re(e,t)}function re(e,t){var n="Class cannot be instantiated in "+(e.scope===h.Request?"request":"transient")+" scope.";if(typeof e.onDeactivation=="function")throw new Error(X(t.name,n));if(Reflect.hasMetadata(G,t))throw new Error(qt(t.name,n))}function En(e,t,n,r){ee(e,t);var o=$n(t,n,r);return g(o)?o.then(function(i){return _n(t,i)}):_n(t,o)}var ie=function(e,t,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function u(c){try{a(r.next(c))}catch(p){s(p)}}function f(c){try{a(r.throw(c))}catch(p){s(p)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((r=r.apply(e,t||[])).next())})},oe=function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,o=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){n.label=a[1];break}if(a[0]===6&&n.label<i[1]){n.label=i[1],i=a;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(a);break}i[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(c){a=[6,c],o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Et=function(e){return function(t){t.parentContext.setCurrentRequest(t);var n=t.bindings,r=t.childRequests,o=t.target&&t.target.isArray(),i=!t.parentRequest||!t.parentRequest.target||!t.target||!t.parentRequest.target.matchesArray(t.target.serviceIdentifier);if(o&&i)return r.map(function(u){var f=Et(e);return f(u)});if(t.target.isOptional()&&n.length===0)return;var s=n[0];return ce(e,t,s)}},ae=function(e,t){var n=yn(e);return Xt(function(){return n.factory.bind(e)(t)},function(){return new Error(Qt(n.factoryType,t.currentRequest.serviceIdentifier.toString()))})},se=function(e,t,n){var r,o=t.childRequests;switch(vn(n),n.type){case l.ConstantValue:case l.Function:r=n.cache;break;case l.Constructor:r=n.implementationType;break;case l.Instance:r=En(n,n.implementationType,o,Et(e));break;default:r=ae(n,t.parentContext)}return r},ue=function(e,t,n){var r=hn(e,t);return r!==null||(r=n(),dn(e,t,r)),r},ce=function(e,t,n){return ue(e,n,function(){var r=se(e,t,n);return g(r)?r=r.then(function(o){return Sn(t,n,o)}):r=Sn(t,n,r),r})};function Sn(e,t,n){var r=fe(e.parentContext,t,n),o=he(e.parentContext.container),i,s=o.next();do{i=s.value;var u=e.parentContext,f=e.serviceIdentifier,a=le(i,f);g(r)?r=wn(a,u,r):r=pe(a,u,r),s=o.next()}while(s.done!==!0&&!W(i).hasKey(e.serviceIdentifier));return r}var fe=function(e,t,n){var r;return typeof t.onActivation=="function"?r=t.onActivation(e,n):r=n,r},pe=function(e,t,n){for(var r=e.next();!r.done;){if(n=r.value(t,n),g(n))return wn(e,t,n);r=e.next()}return n},wn=function(e,t,n){return ie(void 0,void 0,void 0,function(){var r,o;return oe(this,function(i){switch(i.label){case 0:return[4,n];case 1:r=i.sent(),o=e.next(),i.label=2;case 2:return o.done?[3,4]:[4,o.value(t,r)];case 3:return r=i.sent(),o=e.next(),[3,2];case 4:return[2,r]}})})},le=function(e,t){var n=e._activations;return n.hasKey(t)?n.get(t).values():[].values()},he=function(e){for(var t=[e],n=e.parent;n!==null;)t.push(n),n=n.parent;var r=function(){var i=t.pop();return i!==void 0?{done:!1,value:i}:{done:!0,value:void 0}},o={next:r};return o};function Rn(e){var t=Et(e.plan.rootRequest.requestScope);return t(e.plan.rootRequest)}var R=function(e,t){var n=e.parentRequest;return n!==null?t(n)?!0:R(n,t):!1},P=function(e){return function(t){var n=function(r){return r!==null&&r.target!==null&&r.target.matchesTag(e)(t)};return n.metaData=new v(e,t),n}},z=P(_),nt=function(e){return function(t){var n=null;if(t!==null)if(n=t.bindings[0],typeof e=="string"){var r=n.serviceIdentifier;return r===e}else{var o=t.bindings[0].implementationType;return e===o}return!1}};var Y=function(){function e(t){this._binding=t}return e.prototype.when=function(t){return this._binding.constraint=t,new A(this._binding)},e.prototype.whenTargetNamed=function(t){return this._binding.constraint=z(t),new A(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){if(t===null)return!1;var n=t.target!==null&&!t.target.isNamed()&&!t.target.isTagged();return n},new A(this._binding)},e.prototype.whenTargetTagged=function(t,n){return this._binding.constraint=P(t)(n),new A(this._binding)},e.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(n){return n!==null&&nt(t)(n.parentRequest)},new A(this._binding)},e.prototype.whenParentNamed=function(t){return this._binding.constraint=function(n){return n!==null&&z(t)(n.parentRequest)},new A(this._binding)},e.prototype.whenParentTagged=function(t,n){return this._binding.constraint=function(r){return r!==null&&P(t)(n)(r.parentRequest)},new A(this._binding)},e.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(n){return n!==null&&R(n,nt(t))},new A(this._binding)},e.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(n){return n!==null&&!R(n,nt(t))},new A(this._binding)},e.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(n){return n!==null&&R(n,z(t))},new A(this._binding)},e.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(n){return n!==null&&!R(n,z(t))},new A(this._binding)},e.prototype.whenAnyAncestorTagged=function(t,n){return this._binding.constraint=function(r){return r!==null&&R(r,P(t)(n))},new A(this._binding)},e.prototype.whenNoAncestorTagged=function(t,n){return this._binding.constraint=function(r){return r!==null&&!R(r,P(t)(n))},new A(this._binding)},e.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(n){return n!==null&&R(n,t)},new A(this._binding)},e.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(n){return n!==null&&!R(n,t)},new A(this._binding)},e}();var A=function(){function e(t){this._binding=t}return e.prototype.onActivation=function(t){return this._binding.onActivation=t,new Y(this._binding)},e.prototype.onDeactivation=function(t){return this._binding.onDeactivation=t,new Y(this._binding)},e}();var b=function(){function e(t){this._binding=t,this._bindingWhenSyntax=new Y(this._binding),this._bindingOnSyntax=new A(this._binding)}return e.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},e.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(t,n){return this._bindingWhenSyntax.whenTargetTagged(t,n)},e.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},e.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},e.prototype.whenParentTagged=function(t,n){return this._bindingWhenSyntax.whenParentTagged(t,n)},e.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},e.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},e.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},e.prototype.whenAnyAncestorTagged=function(t,n){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,n)},e.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},e.prototype.whenNoAncestorTagged=function(t,n){return this._bindingWhenSyntax.whenNoAncestorTagged(t,n)},e.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},e.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},e.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},e.prototype.onDeactivation=function(t){return this._bindingOnSyntax.onDeactivation(t)},e}();var bn=function(){function e(t){this._binding=t}return e.prototype.inRequestScope=function(){return this._binding.scope=h.Request,new b(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=h.Singleton,new b(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=h.Transient,new b(this._binding)},e}();var St=function(){function e(t){this._binding=t,this._bindingWhenSyntax=new Y(this._binding),this._bindingOnSyntax=new A(this._binding),this._bindingInSyntax=new bn(t)}return e.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},e.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},e.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},e.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},e.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(t,n){return this._bindingWhenSyntax.whenTargetTagged(t,n)},e.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},e.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},e.prototype.whenParentTagged=function(t,n){return this._bindingWhenSyntax.whenParentTagged(t,n)},e.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},e.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},e.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},e.prototype.whenAnyAncestorTagged=function(t,n){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,n)},e.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},e.prototype.whenNoAncestorTagged=function(t,n){return this._bindingWhenSyntax.whenNoAncestorTagged(t,n)},e.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},e.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},e.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},e.prototype.onDeactivation=function(t){return this._bindingOnSyntax.onDeactivation(t)},e}();var Dn=function(){function e(t){this._binding=t}return e.prototype.to=function(t){return this._binding.type=l.Instance,this._binding.implementationType=t,new St(this._binding)},e.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+Ft);var t=this._binding.serviceIdentifier;return this.to(t)},e.prototype.toConstantValue=function(t){return this._binding.type=l.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=h.Singleton,new b(this._binding)},e.prototype.toDynamicValue=function(t){return this._binding.type=l.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new St(this._binding)},e.prototype.toConstructor=function(t){return this._binding.type=l.Constructor,this._binding.implementationType=t,this._binding.scope=h.Singleton,new b(this._binding)},e.prototype.toFactory=function(t){return this._binding.type=l.Factory,this._binding.factory=t,this._binding.scope=h.Singleton,new b(this._binding)},e.prototype.toFunction=function(t){if(typeof t!="function")throw new Error(Yt);var n=this.toConstantValue(t);return this._binding.type=l.Function,this._binding.scope=h.Singleton,n},e.prototype.toAutoFactory=function(t){return this._binding.type=l.Factory,this._binding.factory=function(n){var r=function(){return n.container.get(t)};return r},this._binding.scope=h.Singleton,new b(this._binding)},e.prototype.toAutoNamedFactory=function(t){return this._binding.type=l.Factory,this._binding.factory=function(n){return function(r){return n.container.getNamed(t,r)}},new b(this._binding)},e.prototype.toProvider=function(t){return this._binding.type=l.Provider,this._binding.provider=t,this._binding.scope=h.Singleton,new b(this._binding)},e.prototype.toService=function(t){this.toDynamicValue(function(n){return n.container.get(t)})},e}();var Nn=function(){function e(){}return e.of=function(t,n,r,o,i){var s=new e;return s.bindings=t,s.middleware=n,s.deactivations=o,s.activations=r,s.moduleActivationStore=i,s},e}();function Mn(e){return typeof e=="object"&&e!==null&&"clone"in e&&typeof e.clone=="function"}var I=function(){function e(){this._map=new Map}return e.prototype.getMap=function(){return this._map},e.prototype.add=function(t,n){if(t==null)throw new Error(j);if(n==null)throw new Error(j);var r=this._map.get(t);r!==void 0?r.push(n):this._map.set(t,[n])},e.prototype.get=function(t){if(t==null)throw new Error(j);var n=this._map.get(t);if(n!==void 0)return n;throw new Error(lt)},e.prototype.remove=function(t){if(t==null)throw new Error(j);if(!this._map.delete(t))throw new Error(lt)},e.prototype.removeIntersection=function(t){var n=this;this.traverse(function(r,o){var i=t.hasKey(r)?t.get(r):void 0;if(i!==void 0){var s=o.filter(function(u){return!i.some(function(f){return u===f})});n._setValue(r,s)}})},e.prototype.removeByCondition=function(t){var n=this,r=[];return this._map.forEach(function(o,i){for(var s=[],u=0,f=o;u<f.length;u++){var a=f[u],c=t(a);c?r.push(a):s.push(a)}n._setValue(i,s)}),r},e.prototype.hasKey=function(t){if(t==null)throw new Error(j);return this._map.has(t)},e.prototype.clone=function(){var t=new e;return this._map.forEach(function(n,r){n.forEach(function(o){return t.add(r,Mn(o)?o.clone():o)})}),t},e.prototype.traverse=function(t){this._map.forEach(function(n,r){t(r,n)})},e.prototype._setValue=function(t,n){n.length>0?this._map.set(t,n):this._map.delete(t)},e}();var In=function(){function e(){this._map=new Map}return e.prototype.remove=function(t){if(this._map.has(t)){var n=this._map.get(t);return this._map.delete(t),n}return this._getEmptyHandlersStore()},e.prototype.addDeactivation=function(t,n,r){this._getModuleActivationHandlers(t).onDeactivations.add(n,r)},e.prototype.addActivation=function(t,n,r){this._getModuleActivationHandlers(t).onActivations.add(n,r)},e.prototype.clone=function(){var t=new e;return this._map.forEach(function(n,r){t._map.set(r,{onActivations:n.onActivations.clone(),onDeactivations:n.onDeactivations.clone()})}),t},e.prototype._getModuleActivationHandlers=function(t){var n=this._map.get(t);return n===void 0&&(n=this._getEmptyHandlersStore(),this._map.set(t,n)),n},e.prototype._getEmptyHandlersStore=function(){var t={onActivations:new I,onDeactivations:new I};return t},e}();var st=function(){return st=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},st.apply(this,arguments)},E=function(e,t,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function u(c){try{a(r.next(c))}catch(p){s(p)}}function f(c){try{a(r.throw(c))}catch(p){s(p)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((r=r.apply(e,t||[])).next())})},S=function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,o=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){n.label=a[1];break}if(a[0]===6&&n.label<i[1]){n.label=i[1],i=a;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(a);break}i[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(c){a=[6,c],o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},de=function(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},ve=function(){function e(t){var n=t||{};if(typeof n!="object")throw new Error(""+Ut);if(n.defaultScope===void 0)n.defaultScope=h.Transient;else if(n.defaultScope!==h.Singleton&&n.defaultScope!==h.Transient&&n.defaultScope!==h.Request)throw new Error(""+jt);if(n.autoBindInjectable===void 0)n.autoBindInjectable=!1;else if(typeof n.autoBindInjectable!="boolean")throw new Error(""+kt);if(n.skipBaseClassChecks===void 0)n.skipBaseClassChecks=!1;else if(typeof n.skipBaseClassChecks!="boolean")throw new Error(""+Vt);this.options={autoBindInjectable:n.autoBindInjectable,defaultScope:n.defaultScope,skipBaseClassChecks:n.skipBaseClassChecks},this.id=m(),this._bindingDictionary=new I,this._snapshots=[],this._middleware=null,this._activations=new I,this._deactivations=new I,this.parent=null,this._metadataReader=new vt,this._moduleActivationStore=new In}return e.merge=function(t,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var i=new e,s=de([t,n],r,!0).map(function(a){return W(a)}),u=W(i);function f(a,c){a.traverse(function(p,d){d.forEach(function(D){c.add(D.serviceIdentifier,D.clone())})})}return s.forEach(function(a){f(a,u)}),i},e.prototype.load=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=this._getContainerModuleHelpersFactory(),o=0,i=t;o<i.length;o++){var s=i[o],u=r(s.id);s.registry(u.bindFunction,u.unbindFunction,u.isboundFunction,u.rebindFunction,u.unbindAsyncFunction,u.onActivationFunction,u.onDeactivationFunction)}},e.prototype.loadAsync=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return E(this,void 0,void 0,function(){var r,o,i,s,u;return S(this,function(f){switch(f.label){case 0:r=this._getContainerModuleHelpersFactory(),o=0,i=t,f.label=1;case 1:return o<i.length?(s=i[o],u=r(s.id),[4,s.registry(u.bindFunction,u.unbindFunction,u.isboundFunction,u.rebindFunction,u.unbindAsyncFunction,u.onActivationFunction,u.onDeactivationFunction)]):[3,4];case 2:f.sent(),f.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},e.prototype.unload=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];n.forEach(function(o){var i=t._removeModuleBindings(o.id);t._deactivateSingletons(i),t._removeModuleHandlers(o.id)})},e.prototype.unloadAsync=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return E(this,void 0,void 0,function(){var r,o,i,s;return S(this,function(u){switch(u.label){case 0:r=0,o=t,u.label=1;case 1:return r<o.length?(i=o[r],s=this._removeModuleBindings(i.id),[4,this._deactivateSingletonsAsync(s)]):[3,4];case 2:u.sent(),this._removeModuleHandlers(i.id),u.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},e.prototype.bind=function(t){var n=this.options.defaultScope||h.Transient,r=new bt(t,n);return this._bindingDictionary.add(t,r),new Dn(r)},e.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},e.prototype.rebindAsync=function(t){return E(this,void 0,void 0,function(){return S(this,function(n){switch(n.label){case 0:return[4,this.unbindAsync(t)];case 1:return n.sent(),[2,this.bind(t)]}})})},e.prototype.unbind=function(t){if(this._bindingDictionary.hasKey(t)){var n=this._bindingDictionary.get(t);this._deactivateSingletons(n)}this._removeServiceFromDictionary(t)},e.prototype.unbindAsync=function(t){return E(this,void 0,void 0,function(){var n;return S(this,function(r){switch(r.label){case 0:return this._bindingDictionary.hasKey(t)?(n=this._bindingDictionary.get(t),[4,this._deactivateSingletonsAsync(n)]):[3,2];case 1:r.sent(),r.label=2;case 2:return this._removeServiceFromDictionary(t),[2]}})})},e.prototype.unbindAll=function(){var t=this;this._bindingDictionary.traverse(function(n,r){t._deactivateSingletons(r)}),this._bindingDictionary=new I},e.prototype.unbindAllAsync=function(){return E(this,void 0,void 0,function(){var t,n=this;return S(this,function(r){switch(r.label){case 0:return t=[],this._bindingDictionary.traverse(function(o,i){t.push(n._deactivateSingletonsAsync(i))}),[4,Promise.all(t)];case 1:return r.sent(),this._bindingDictionary=new I,[2]}})})},e.prototype.onActivation=function(t,n){this._activations.add(t,n)},e.prototype.onDeactivation=function(t,n){this._deactivations.add(t,n)},e.prototype.isBound=function(t){var n=this._bindingDictionary.hasKey(t);return!n&&this.parent&&(n=this.parent.isBound(t)),n},e.prototype.isCurrentBound=function(t){return this._bindingDictionary.hasKey(t)},e.prototype.isBoundNamed=function(t,n){return this.isBoundTagged(t,_,n)},e.prototype.isBoundTagged=function(t,n,r){var o=!1;if(this._bindingDictionary.hasKey(t)){var i=this._bindingDictionary.get(t),s=ln(this,t,n,r);o=i.some(function(u){return u.constraint(s)})}return!o&&this.parent&&(o=this.parent.isBoundTagged(t,n,r)),o},e.prototype.snapshot=function(){this._snapshots.push(Nn.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))},e.prototype.restore=function(){var t=this._snapshots.pop();if(t===void 0)throw new Error(Bt);this._bindingDictionary=t.bindings,this._activations=t.activations,this._deactivations=t.deactivations,this._middleware=t.middleware,this._moduleActivationStore=t.moduleActivationStore},e.prototype.createChild=function(t){var n=new e(t||this.options);return n.parent=this,n},e.prototype.applyMiddleware=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce(function(o,i){return i(o)},r)},e.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},e.prototype.get=function(t){var n=this._getNotAllArgs(t,!1);return this._getButThrowIfAsync(n)},e.prototype.getAsync=function(t){return E(this,void 0,void 0,function(){var n;return S(this,function(r){return n=this._getNotAllArgs(t,!1),[2,this._get(n)]})})},e.prototype.getTagged=function(t,n,r){var o=this._getNotAllArgs(t,!1,n,r);return this._getButThrowIfAsync(o)},e.prototype.getTaggedAsync=function(t,n,r){return E(this,void 0,void 0,function(){var o;return S(this,function(i){return o=this._getNotAllArgs(t,!1,n,r),[2,this._get(o)]})})},e.prototype.getNamed=function(t,n){return this.getTagged(t,_,n)},e.prototype.getNamedAsync=function(t,n){return this.getTaggedAsync(t,_,n)},e.prototype.getAll=function(t){var n=this._getAllArgs(t);return this._getButThrowIfAsync(n)},e.prototype.getAllAsync=function(t){var n=this._getAllArgs(t);return this._getAll(n)},e.prototype.getAllTagged=function(t,n,r){var o=this._getNotAllArgs(t,!0,n,r);return this._getButThrowIfAsync(o)},e.prototype.getAllTaggedAsync=function(t,n,r){var o=this._getNotAllArgs(t,!0,n,r);return this._getAll(o)},e.prototype.getAllNamed=function(t,n){return this.getAllTagged(t,_,n)},e.prototype.getAllNamedAsync=function(t,n){return this.getAllTaggedAsync(t,_,n)},e.prototype.resolve=function(t){var n=this.isBound(t);n||this.bind(t).toSelf();var r=this.get(t);return n||this.unbind(t),r},e.prototype._preDestroy=function(t,n){if(Reflect.hasMetadata(G,t)){var r=Reflect.getMetadata(G,t);return n[r.value]()}},e.prototype._removeModuleHandlers=function(t){var n=this._moduleActivationStore.remove(t);this._activations.removeIntersection(n.onActivations),this._deactivations.removeIntersection(n.onDeactivations)},e.prototype._removeModuleBindings=function(t){return this._bindingDictionary.removeByCondition(function(n){return n.moduleId===t})},e.prototype._deactivate=function(t,n){var r=this,o=Object.getPrototypeOf(n).constructor;try{if(this._deactivations.hasKey(t.serviceIdentifier)){var i=this._deactivateContainer(n,this._deactivations.get(t.serviceIdentifier).values());if(g(i))return this._handleDeactivationError(i.then(function(){return r._propagateContainerDeactivationThenBindingAndPreDestroyAsync(t,n,o)}),o)}var s=this._propagateContainerDeactivationThenBindingAndPreDestroy(t,n,o);if(g(s))return this._handleDeactivationError(s,o)}catch(u){throw new Error(X(o.name,u.message))}},e.prototype._handleDeactivationError=function(t,n){return E(this,void 0,void 0,function(){var r;return S(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,t];case 1:return o.sent(),[3,3];case 2:throw r=o.sent(),new Error(X(n.name,r.message));case 3:return[2]}})})},e.prototype._deactivateContainer=function(t,n){for(var r=this,o=n.next();o.value;){var i=o.value(t);if(g(i))return i.then(function(){return r._deactivateContainerAsync(t,n)});o=n.next()}},e.prototype._deactivateContainerAsync=function(t,n){return E(this,void 0,void 0,function(){var r;return S(this,function(o){switch(o.label){case 0:r=n.next(),o.label=1;case 1:return r.value?[4,r.value(t)]:[3,3];case 2:return o.sent(),r=n.next(),[3,1];case 3:return[2]}})})},e.prototype._getContainerModuleHelpersFactory=function(){var t=this,n=function(c,p){c._binding.moduleId=p},r=function(c){return function(p){var d=t.bind(p);return n(d,c),d}},o=function(){return function(c){return t.unbind(c)}},i=function(){return function(c){return t.unbindAsync(c)}},s=function(){return function(c){return t.isBound(c)}},u=function(c){return function(p){var d=t.rebind(p);return n(d,c),d}},f=function(c){return function(p,d){t._moduleActivationStore.addActivation(c,p,d),t.onActivation(p,d)}},a=function(c){return function(p,d){t._moduleActivationStore.addDeactivation(c,p,d),t.onDeactivation(p,d)}};return function(c){return{bindFunction:r(c),isboundFunction:s(),onActivationFunction:f(c),onDeactivationFunction:a(c),rebindFunction:u(c),unbindFunction:o(),unbindAsyncFunction:i()}}},e.prototype._getAll=function(t){return Promise.all(this._get(t))},e.prototype._get=function(t){var n=st(st({},t),{contextInterceptor:function(o){return o},targetType:N.Variable});if(this._middleware){var r=this._middleware(n);if(r==null)throw new Error(Pt);return r}return this._planAndResolve()(n)},e.prototype._getButThrowIfAsync=function(t){var n=this._get(t);if(at(n))throw new Error(Lt(t.serviceIdentifier));return n},e.prototype._getAllArgs=function(t){var n={avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:t};return n},e.prototype._getNotAllArgs=function(t,n,r,o){var i={avoidConstraints:!1,isMultiInject:n,serviceIdentifier:t,key:r,value:o};return i},e.prototype._planAndResolve=function(){var t=this;return function(n){var r=pn(t._metadataReader,t,n.isMultiInject,n.targetType,n.serviceIdentifier,n.key,n.value,n.avoidConstraints);r=n.contextInterceptor(r);var o=Rn(r);return o}},e.prototype._deactivateIfSingleton=function(t){var n=this;if(!!t.activated)return g(t.cache)?t.cache.then(function(r){return n._deactivate(t,r)}):this._deactivate(t,t.cache)},e.prototype._deactivateSingletons=function(t){for(var n=0,r=t;n<r.length;n++){var o=r[n],i=this._deactivateIfSingleton(o);if(g(i))throw new Error(Jt)}},e.prototype._deactivateSingletonsAsync=function(t){return E(this,void 0,void 0,function(){var n=this;return S(this,function(r){switch(r.label){case 0:return[4,Promise.all(t.map(function(o){return n._deactivateIfSingleton(o)}))];case 1:return r.sent(),[2]}})})},e.prototype._propagateContainerDeactivationThenBindingAndPreDestroy=function(t,n,r){return this.parent?this._deactivate.bind(this.parent)(t,n):this._bindingDeactivationAndPreDestroy(t,n,r)},e.prototype._propagateContainerDeactivationThenBindingAndPreDestroyAsync=function(t,n,r){return E(this,void 0,void 0,function(){return S(this,function(o){switch(o.label){case 0:return this.parent?[4,this._deactivate.bind(this.parent)(t,n)]:[3,2];case 1:return o.sent(),[3,4];case 2:return[4,this._bindingDeactivationAndPreDestroyAsync(t,n,r)];case 3:o.sent(),o.label=4;case 4:return[2]}})})},e.prototype._removeServiceFromDictionary=function(t){try{this._bindingDictionary.remove(t)}catch{throw new Error(Mt+" "+M(t))}},e.prototype._bindingDeactivationAndPreDestroy=function(t,n,r){var o=this;if(typeof t.onDeactivation=="function"){var i=t.onDeactivation(n);if(g(i))return i.then(function(){return o._preDestroy(r,n)})}return this._preDestroy(r,n)},e.prototype._bindingDeactivationAndPreDestroyAsync=function(t,n,r){return E(this,void 0,void 0,function(){return S(this,function(o){switch(o.label){case 0:return typeof t.onDeactivation!="function"?[3,2]:[4,t.onDeactivation(n)];case 1:o.sent(),o.label=2;case 2:return[4,this._preDestroy(r,n)];case 3:return o.sent(),[2]}})})},e}();var ye=function(){function e(t){this.id=m(),this.registry=t}return e}();var Ae=function(){function e(t){this.id=m(),this.registry=t}return e}();function On(e){for(var t=new Set,n=0,r=e;n<r.length;n++){var o=r[n];if(t.has(o))return o;t.add(o)}}function _e(e){return e.prototype!==void 0}function ge(e){if(e!==void 0)throw new Error(dt)}function et(e,t,n,r){ge(t),xn(Q,e,n.toString(),r)}function me(e,t,n){if(_e(e))throw new Error(dt);xn(Z,e.constructor,t,n)}function Te(e){var t=[];if(Array.isArray(e)){t=e;var n=On(t.map(function(r){return r.key}));if(n!==void 0)throw new Error(pt+" "+n.toString())}else t=[e];return t}function xn(e,t,n,r){var o=Te(r),i={};Reflect.hasOwnMetadata(e,t)&&(i=Reflect.getMetadata(e,t));var s=i[n];if(s===void 0)s=[];else for(var u=function(p){if(o.some(function(d){return d.key===p.key}))throw new Error(pt+" "+p.key.toString())},f=0,a=s;f<a.length;f++){var c=a[f];u(c)}s.push.apply(s,o),i[n]=s,Reflect.defineMetadata(e,i,t)}function O(e){return function(t,n,r){typeof r=="number"?et(t,n,r,e):me(t,n,e)}}function Cn(e,t){Reflect.decorate(e,t)}function Ee(e,t){return function(n,r){t(n,r,e)}}function Se(e,t,n){typeof n=="number"?Cn([Ee(n,e)],t):typeof n=="string"?Reflect.decorate([e],t,n):Cn([e],t)}function we(){return function(e){if(Reflect.hasOwnMetadata(K,e))throw new Error(Dt);var t=Reflect.getMetadata(ft,e)||[];return Reflect.defineMetadata(K,t,e),e}}function Re(e,t){return O(new v(e,t))}function be(e){return O(new v(_,e))}function ut(e){return function(t){return function(n,r,o){if(t===void 0){var i=typeof n=="function"?n.name:n.constructor.name;throw new Error(Ct(i))}return O(new v(e,t))(n,r,o)}}}var De=ut(x);function Ne(){return O(new v(F,!0))}function Me(){return function(e,t,n){var r=new v(B,!0);et(e,t,n,r)}}var Ie=ut(w);function Oe(e){return function(t,n,r){var o=new v(L,e);et(t,n,r,o)}}function ct(e,t){return function(){return function(n,r){var o=new v(e,r);if(Reflect.hasOwnMetadata(e,n.constructor))throw new Error(t);Reflect.defineMetadata(e,o,n.constructor)}}}var Ce=ct(U,Ht);var xe=ct(G,Wt);var wt;(function(e){})(wt||(wt={}));var uo=y;export{Ae as AsyncContainerModule,h as BindingScopeEnum,l as BindingTypeEnum,ve as Container,ye as ContainerModule,mt as LazyServiceIdentifer,uo as METADATA_KEY,vt as MetadataReader,N as TargetTypeEnum,O as createTaggedDecorator,Se as decorate,M as getServiceIdentifierAsString,m as id,De as inject,we as injectable,wt as interfaces,Qn as multiBindToService,Ie as multiInject,be as named,z as namedConstraint,Ne as optional,Ce as postConstruct,xe as preDestroy,Re as tagged,P as taggedConstraint,Oe as targetName,R as traverseAncerstors,nt as typeConstraint,Me as unmanaged};
